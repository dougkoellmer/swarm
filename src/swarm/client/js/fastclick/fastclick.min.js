(function(){function d(a,b,c,d){if(a.addEventListener)return a.addEventListener(b,c,d),{destroy:function(){a.removeEventListener(b,c,d)}};var e=function(a){c.handleEvent(window.event,c)};a.attachEvent("on"+b,e);return{destroy:function(){a.detachEvent("on"+b,e)}}}var e="ontouchstart"in window;this.FastButton=function(a,b,c){this.events=[];this.touchEvents=[];this.element=a;this.handler=b;this.useCapture=c;e&&this.events.push(d(a,"touchstart",this,this.useCapture));this.events.push(d(a,"click",this,
this.useCapture))};this.FastButton.prototype.destroy=function(){for(i=this.events.length-1;0<=i;i-=1)this.events[i].destroy();this.events=this.touchEvents=this.element=this.handler=this.fastButton=null};this.FastButton.prototype.handleEvent=function(a){switch(a.type){case "touchstart":this.onTouchStart(a);break;case "touchmove":this.onTouchMove(a);break;case "touchend":this.onClick(a);break;case "click":this.onClick(a)}};this.FastButton.prototype.onTouchStart=function(a){a.stopPropagation?a.stopPropagation():
a.cancelBubble=!0;this.touchEvents.push(d(this.element,"touchend",this,this.useCapture));this.touchEvents.push(d(document.body,"touchmove",this,this.useCapture));this.startX=a.touches[0].clientX;this.startY=a.touches[0].clientY};this.FastButton.prototype.onTouchMove=function(a){(10<Math.abs(a.touches[0].clientX-this.startX)||10<Math.abs(a.touches[0].clientY-this.startY))&&this.reset()};this.FastButton.prototype.onClick=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;this.reset();
var b=this.handler.call(this.element,a);"touchend"==a.type&&clickbuster.preventGhostClick(this.startX,this.startY);return b};this.FastButton.prototype.reset=function(){for(i=this.touchEvents.length-1;0<=i;i-=1)this.touchEvents[i].destroy();this.touchEvents=[]};this.clickbuster=function(){};this.clickbuster.preventGhostClick=function(a,b){clickbuster.coordinates.push(a,b);window.setTimeout(clickbuster.pop,2500)};this.clickbuster.pop=function(){clickbuster.coordinates.splice(0,2)};this.clickbuster.onClick=
function(a){for(var b=0;b<clickbuster.coordinates.length;b+=2){var c=clickbuster.coordinates[b+1];25>Math.abs(a.clientX-clickbuster.coordinates[b])&&25>Math.abs(a.clientY-c)&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,a.preventDefault?a.preventDefault():a.returnValue=!1)}};e&&(document.addEventListener("click",clickbuster.onClick,!0),clickbuster.coordinates=[])})(this);
